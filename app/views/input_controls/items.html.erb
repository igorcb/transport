<script type="text/javascript">
  $(function(){
    $("#barcode").focus();
  })
</script>
<form id="search" action="" method="get">
  <div class="form-group col-md-5 has-feedback <%= @feedback %>">
    <label for="qtde">Ler codigo de barras</label>
    <div class="input-group">
      <a href="http://zxing.appspot.com/scan?ret=<%= @request_items %>?ean={CODE}" class="input-group-addon">
        <i class="fas fa-barcode"></i>
      </a>
      <input type="number" id="barcode" name="ean" class="form-control" value="<%= params["ean"] %>">
      <a href="#" onClick="document.getElementById('search').submit();"botton class="btn btn-primary input-group-addon"><i class="fas fa-search"></i></a>
    </div>
  </div>

</form>


<% if @product.present? %>
<script type="text/javascript">
  $(function(){
    $('#myModal').modal();
  });
</script>
<div id="myModal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><%= @product.descricao %></h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="qtde">Quantidade</label>
          <input id="qtde" type="number" class="form-control" placeholder="Quantidade">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary">Salvar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<table class="table table-responsive">
  <thead>
    <tr>
      <th>Ean</th>
      <th>Descrição</th>
      <th>Qtde</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><%= @product.ean %></td>
      <td><%= @product.descricao %></td>
      <td>xx</td>
    </tr>
  </tbody>
</table>

<% end %>

<table class="table table-responsive">
  <thead>
    <tr>
      <th>Cod Produto</th>
      <th colspan="2">Cod Ean</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <% @items.each do |row| %>
    <tr>
      <td><%= row.product.id %></td>
      <td><%= row.product.ean %></td>
      <td><img src="<%= code128(row.product.ean, height: 100) %>" alt=""></td>
      <td><%= row.product.descricao %></td>
    </tr>
    <% end %>
  </tbody>
</table>
